<!-- Alpine.js container -->
<div
  x-data="{
      sidebarOpen: JSON.parse(localStorage.getItem('sidebarOpen')) ?? true,
      mobileSidebar: false,
      toggleSidebar() {
          this.sidebarOpen = !this.sidebarOpen;
          localStorage.setItem('sidebarOpen', JSON.stringify(this.sidebarOpen));
      }
  }"
  class="flex h-screen bg-gray-100"
>
    <!-- Off-canvas mobile sidebar -->
    <div class="md:hidden" x-show="mobileSidebar" x-cloak>
        <div
            class="fixed inset-0 z-30 bg-black/50"
            @click="mobileSidebar = false"
        ></div>

        <aside
            class="fixed left-0 top-0 z-40 w-72 h-full bg-[rgb(34,36,38)] text-white p-6 flex flex-col"
        >
            <div class="flex items-center justify-between mb-8">
                <img
                    src="{{ asset('images/logo-light.png') }}"
                    alt="Logo"
                    class="h-20 w-auto"
                />
                <button
                    @click="mobileSidebar = false"
                    class="text-gray-400 hover:text-white text-xl"
                >
                    âœ•
                </button>
            </div>

            <nav class="flex-1 space-y-3">
                <a
                    href="{{ path('app_dashboard') }}"
                    class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition"
                >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="font-medium">Dashboard</span>
                </a>
                <a href="{{ path('app_catalog') }}" class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="M21 21l-4.35-4.35M17 11a6 6 0 1 0-12 0 6 6 0 0 0 12 0z"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="font-medium">Catalog</span>
                </a>
                <a href="{{ path('app_request') }}" class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="M3 8l7.89 5.26a2 2 0 0 0 2.22 0L21 8m-18 8h18a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2z"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="font-medium">Requests</span>
                </a>
                <a href="{{ path('app_transaction') }}" class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="M4 4v6h6M20 20v-6h-6M4 14a8 8 0 0 1 16 0"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="font-medium">Issue / Return</span>
                </a>
                <a href="{{ path('app_inventory') }}" class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="M20 7l-8-4-8 4v10l8 4 8-4V7z"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="font-medium">Inventory</span>
                </a>
                <a href="{{ path('app_user_roles') }}" class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="M17 20h5v-1a4 4 0 0 0-4-4h-1M9 20H4v-1a4 4 0 0 1 4-4h1M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10z"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="font-medium">Users</span>
                </a>
                <a href="{{ path('app_report') }}" class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="M11 3v18m4-6v6m-8-4v4"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="font-medium">Reports</span>
                </a>
                <a href="{{ path('app_audit') }}" class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="M9 12h6m-6 4h6m2 4H7a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h3l2-2 2 2h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2z"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="font-medium">Audit Logs</span>
                </a>
                <a href="{{ path('app_setting') }}" class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-gray-700 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0-6v2m0 16v2m10-10h-2M4 12H2m15.364-7.364l-1.414 1.414M6.05 17.95l-1.414 1.414m0-15.364l1.414 1.414M17.95 17.95l1.414 1.414"
                            stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                    <span class="font-medium">Settings</span>
                </a>
            </nav>
        </aside>
    </div>

    <!-- Desktop sidebar -->
    <aside
        :class="sidebarOpen ? 'w-64' : 'w-20'"
        class="hidden md:flex md:flex-col h-screen bg-[rgb(34,36,38)] text-white transition-all duration-300 shadow-lg"
    >
        <div class="flex items-center justify-between p-4">
            <img
                x-show="sidebarOpen"
                src="{{ asset('images/logo-light.png') }}"
                alt="Logo"
                class="h-20 w-auto transition-all"
            />
            <button
                @click="toggleSidebar()"
                class="p-4 rounded hover:bg-gray-700 transition"
            >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5"
                    fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path
                        x-show="sidebarOpen"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M18 6L6 12l12 6V6z"
                    />
                    <path
                        x-show="!sidebarOpen"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M6 18L18 12 6 6v12z"
                    />
                </svg>
            </button>
        </div>

        <nav class="flex-1 px-4 py-4 space-y-1">
            {% set menu = [
                {'label': 'Dashboard', 'icon': 'M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z', 'route': 'app_dashboard'},
                {'label': 'Catalog', 'icon': 'M21 21l-4.35-4.35M17 11a6 6 0 1 0-12 0 6 6 0 0 0 12 0z', 'route': 'app_catalog'},
                {'label': 'Requests', 'icon': 'M3 8l7.89 5.26a2 2 0 0 0 2.22 0L21 8m-18 8h18a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2z', 'route': 'app_request'},
                {'label': 'Issue / Return', 'icon': 'M4 4v6h6M20 20v-6h-6M4 14a8 8 0 0 1 16 0', 'route': 'app_transaction'},
                {'label': 'Inventory', 'icon': 'M20 7l-8-4-8 4v10l8 4 8-4V7z', 'route': 'app_inventory'},
                {'label': 'Users', 'icon': 'M17 20h5v-1a4 4 0 0 0-4-4h-1M9 20H4v-1a4 4 0 0 1 4-4h1M12 12a5 5 0 1 0 0-10 5 5 0 0 0 0 10z', 'route': 'app_user_roles'},
                {'label': 'Reports', 'icon': 'M11 3v18m4-6v6m-8-4v4', 'route': 'app_report'},
                {'label': 'Audit Logs', 'icon': 'M9 12h6m-6 4h6m2 4H7a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h3l2-2 2 2h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2z', 'route': 'app_audit'},
                {'label': 'Settings', 'icon': 'M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0-6v2m0 16v2m10-10h-2M4 12H2m15.364-7.364l-1.414 1.414M6.05 17.95l-1.414 1.414m0-15.364l1.414 1.414M17.95 17.95l1.414 1.414', 'route': 'app_setting'}
            ] %}

            {% for item in menu %}
                <a href="{{ path(item.route) }}"
                    class="group flex items-center gap-4 py-3 px-3 rounded-lg hover:bg-gray-800 transition">
                    <svg class="w-6 h-6 text-gray-300 group-hover:text-white transition"
                        fill="none" stroke="currentColor" stroke-width="2"
                        viewBox="0 0 24 24">
                        <path d="{{ item.icon }}" stroke-linecap="round"
                            stroke-linejoin="round" />
                    </svg>
                    <span x-show="sidebarOpen" class="text-gray-200 font-medium transition">
                        {{ item.label }}
                    </span>
                </a>
            {% endfor %}
        </nav>

        <!-- User panel -->
        <div class="p-4 mt-auto flex items-center justify-between bg-accent">
            <div class="flex items-center gap-3" x-show="sidebarOpen">
                <div
                    class="h-10 w-10 rounded-full bg-gray-600 flex items-center justify-center text-white font-semibold"
                >
                    MA
                </div>
                <div>
                    <p class="text-sm font-bold">Managtuba Atilla</p>
                    <p class="text-xs font-bold text-gray-100 uppercase">
                        OFFICER
                    </p>
                </div>
            </div>
            <form method="post" action="{{ path('app_logout') }}">
                <button type="submit" class="w-10 h-10 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white"
                        fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            stroke-width="2"
                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1" />
                    </svg>
                </button>
            </form>
        </div>
    </aside>
</div>
